{% extends "base.html" %}

{% load i18n %}
{% load tags %}

{% block content %}
  <div class="row masonry-grid">
    {% for object in object_list %}
      <div class="col s12 m4 l4">
        <div class="card">
          {% if object.activity.photo %}
            <a href="{{ object.activity.get_absolute_url }}" class="hoverable" track-event="btn-card-join-activity">
              <div class="card-image">
                <img src="{{ object.activity.get_photo_url }}"/>
              </div>
              <h5 class="card-content truncate">{{ object.activity }}</h5>
            </a>
          {% else %}
            <div class="card-content">
              <div class="card-title white-text">
                <a href="{{ object.activity.get_absolute_url }}" track-event="btn-title-join-activity">
                  <h5>{{ object.activity }}</h5>
                </a>
              </div>
            </div>
          {% endif %}
          <div class="card-action">
            <div class="center-align">
              {% if object.attended_at %}
                <a class="btn-large" style="width: 100%" href="{% url 'attendee:certificate' activity_slug=object.activity.slug code=object.code %}" target="_blank">
                  {% trans 'Open certificate' %}
                  <i class="material-icons right">file_download</i>
                </a>
              {% else %}
                <a class="btn-large grey darken-2 tooltipped" style="width: 100%" href="mailto:{{ object|get_organizer_email }}?subject={{ object|get_certificate_subject }}" data-position="top" data-delay="50" data-tooltip="{% trans 'You are not marked as attended.' %}" target="_blank">
                  {% trans 'Ask for Certificate' %}
                  <i class="material-icons right">help</i>
                </a>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    {% empty %}
      <div class="col s12 m12 l12">
        <p class="caption">
          {% trans 'Unfortunately, we have no activities in the area. Spread education.' %}
          <a href="{% url 'activity:create' %}" class="btn-link">
            {% trans 'Tell us an activity!' %}
          </a>
        </p>
      </div>
    {% endfor %}
  </div>
{% endblock content %}
