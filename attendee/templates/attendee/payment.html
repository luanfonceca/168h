{% extends "base.html" %}

{% load i18n %}
{% load static %}
{% load widget_tweaks %}

{% load tags %}

{% block extra_css %}
  <style type="text/css">
    #id_expiry_date select {
      top: 2px;
      position: relative;
      display: inline-block;
      margin-bottom: 10px;
      width: calc(50% - 10px);
    }

    #id_expiry_date span {
      margin: 0px 2px;
    }
  </style>
{% endblock extra_css %}

{% block content %}
  <form method="POST" id="payment_form" autocomplete="on">
    {% csrf_token %}
    <textarea id="id_public_key" style="display:none;">
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsXkulsKdAQLMH/zjzTLf
0lrbgulfb6ZShEtRpmDnyX93EQqPdez7LyptvQBeTC+0pN57rNcWen9ApdsIMsNr
YHjNQf/kI4Ka7Xnlx0U/v7bW1D8teDoD5glBTXLjU8hRi7qlOpupiPx4ldSnK9Jj
tYApWuZMiCpWh/YRAlNW/N+ffm7ulq6H2atmgd+OFB2SghpbRJkqJiLaNJW8UkaR
oXLHkF5WJD/RPrCxsZztYJQThxLX5gBgZ12YG5+7G26Ad/mWkPqF0GLSkd1gcnbP
vF9Nw3ckKaIvh4Q4Vp3XI1hLvX41lg9CBxPPHkiJwM1M1coF9xsMP7kpJ2eujMBd
mwIDAQAB
-----END PUBLIC KEY-----
    </textarea>


    <div class="row">
      {% include 'includes/field.html' with field=form.credit_card|append_attr:'autocomplete:"cc-number"' col_sizes='s8 m6' class='cc-number' %}      
      {% include 'includes/field.html' with field=form.cvv|append_attr:'autocomplete:"off"' col_sizes='s4 m3' class='cc-cvc' %}
      
      <div class="clearfix"></div>

      {% include 'includes/field.html' with field=form.name|append_attr:'autocomplete="cc-full-name"' col_sizes='s6 m6' %}  
      <div id="id_expiry_date" class="input-field col s6 m3">
        {% with form.month as field %}
          {% render_field field|append_attr:'autocomplete:"cc-exp-month"' class+=field|get_error_class class+=class class+='browser-default' %}
        {% endwith %}

        <span>/</span>

        {% with form.year as field %}
          {% render_field field|append_attr:'autocomplete:"cc-exp-year"' class+=field|get_error_class class+=class class+='browser-default' %}
        {% endwith %}
        <label class="active" for="id_month">Expiry Dates</label>
      </div>

      <div class="clearfix"></div>

      {% include 'includes/field.html' with field=form.birth_date col_sizes='s12 m3' %}
      {% include 'includes/field.html' with field=form.cpf col_sizes='s12 m3' %}
      {% include 'includes/field.html' with field=form.phone col_sizes='s12 m3' %}
    </div>

    <br>
    <div class="center-align col s4">
      <a href="{% url 'activity:detail' activity.slug %}">
        {% trans 'back' %}
      </a>
      &nbsp;
      <button type="submit" class="btn-large waves-effect waves-light blue darken-4">
        {% trans 'Pay' %}
        <i class="material-icons right">done</i>
      </button>
    </div>
  </form>
{% endblock %}

{% block extra_js %}
  <script type="text/javascript" src="{% static 'attendee/js/moip-2.7.0.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'attendee/js/jquery.validate.js' %}"></script>
  <script type="text/javascript" src="{% static 'attendee/js/jquery.maskedinput.js' %}"></script>
  <script type="text/javascript" src="{% static 'attendee/js/payment.js' %}"></script>
{% endblock extra_js %}